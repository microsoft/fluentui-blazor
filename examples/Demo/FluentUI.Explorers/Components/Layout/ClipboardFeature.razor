<div id="clipboard-menu-id" style="display: none; position: fixed; z-index: 9999;">
    <FluentMenuList Style="width: 220px;">
        <FluentMenuItem OnClick="@(e => ItemToCopyAsync("name"))">
            Copy the name
        </FluentMenuItem>
        <FluentMenuItem OnClick="@(e => ItemToCopyAsync("simplified"))">
            Copy the simplified component
        </FluentMenuItem>
        <FluentMenuItem OnClick="@(e => ItemToCopyAsync("full"))">
            Copy the full component
        </FluentMenuItem>
    </FluentMenuList>
</div>

<script>
    window.copyToClipboard = function(text, element) {
        navigator.clipboard.writeText(text).then(function () {
            // Add animation class
            element.classList.add('copied');

            // Remove the animation class after animation completes
            setTimeout(function() {
                element.classList.remove('copied');
            }, 600); // Match the animation duration

            return "";
        }).catch(function (error) {
            return error;
        });
    }

    window.itemToClipboard = function(name) {
        const menu = document.getElementById('clipboard-menu-id');
        if (menu && menu.data) {
            switch (name)
            {
                case "name":
                    copyToClipboard(menu.data.name, menu.data.element);
                    break;

                case "simplified":
                    copyToClipboard(menu.data.simplified, menu.data.element);
                    break;

               case "full":
                    copyToClipboard(menu.data.full, menu.data.element);
                    break;
            }

        }
    }

    window.nameToClipboard = function() {
        const menu = document.getElementById('clipboard-menu-id');
        if (menu && menu.data) {
            copyToClipboard(menu.data.name, menu.data.element);
        }
    }

    window.showContextMenu = function(x, y, data) {
        const menu = document.getElementById('clipboard-menu-id');
        if (menu) {
            // Position the menu at mouse coordinates
            menu.style.position = 'fixed';
            menu.style.left = x + 'px';
            menu.style.top = (y - 100) + 'px';
            menu.style.display = 'block';
            menu.style.zIndex = '9999';

            menu.data = data;

            // Add click listener to hide menu when clicking elsewhere
            setTimeout(function() {
                document.addEventListener('click', hideContextMenu);
            }, 0);
        }
    }

    window.hideContextMenu = function() {
        const menu = document.getElementById('clipboard-menu-id');
        if (menu) {
            menu.style.display = 'none';
        }
        document.removeEventListener('click', hideContextMenu);
    }
</script>
