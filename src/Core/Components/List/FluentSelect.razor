@namespace Microsoft.FluentUI.AspNetCore.Components
@using Microsoft.FluentUI.AspNetCore.Components.Extensions
@inherits FluentListBase<TOption, TValue>
@typeparam TOption
@typeparam TValue

<CascadingValue Value="GetCurrentContext()" Name="ListContext" TValue="InternalListContext<TValue>" IsFixed="true">
    <CascadingValue Value="(InternalListContext)GetCurrentContext()" Name="ListContextBase" TValue="InternalListContext" IsFixed="true">
        <FluentField InputComponent="@this" ForId="@Id" Class="@ClassValue" Style="@StyleValue">
            <fluent-dropdown id="@Id"
                             appearance="@(Appearance.ToAttributeValue(isNull: ListAppearance.Outline, returnEmptyAsNull: true))"
                             placeholder="@Placeholder"
                             slot="@FluentSlot.FieldInput"
                             aria-label="@AriaLabel"
                             autofocus="@Autofocus"
                             disabled="@Disabled"
                             multiple="@Multiple"
                             name="@Name"
                             readonly="@ReadOnly"
                             required="@Required"
                             size="@(Size.ToAttributeValue(isNull: ListSize.Medium, returnEmptyAsNull: true))"
                             style="@DropdownStyle"
                             type="@DropdownType"
                             @ondropdownchange="@OnDropdownChangeHandlerAsync"
                             @onfocusout="@FocusOutHandlerAsync"
                             @attributes=AdditionalAttributes>
                <fluent-listbox style="@ListStyle">
                    @RenderOptions()
                </fluent-listbox>

                @RenderExtraFragment()

            </fluent-dropdown>
        </FluentField>
    </CascadingValue>
</CascadingValue>
